"use strict"

const makeRequire = require("../../../../../../")

const suffixRegExp = /(?:[.-](?:js|node))+$/

function EX(bridgeMod) {
  const esmRequire = makeRequire(bridgeMod)
  const filename = bridgeMod.filename.replace(suffixRegExp, "") + ".mjs"
  const exported = esmRequire(filename)

  bridgeMod.exports = exported.default || exported
  return esmRequire
}

module.exports = EX
